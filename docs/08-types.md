# 8. Data Types (`types.ts`)

This document provides a reference for the core data structures and types used throughout the BB Manager application. These types are centrally defined in `types.ts` to ensure consistency and type safety across the entire codebase.

---

### Core Data Models

#### `Boy`

Represents a single member of the Boys' Brigade. This is the central data object in the application.

```typescript
interface Boy {
  /** A unique identifier, generated by Firestore or a temporary one for offline creation. */
  id?: string;
  /** The full name of the member. */
  name: string;
  /** The squad number the member belongs to. */
  squad: Squad | JuniorSquad;
  /** The school year of the member. */
  year: SchoolYear | JuniorYear;
  /** An array of all recorded marks for the member. */
  marks: Mark[];
  /** A flag indicating if the member is a designated squad leader. */
  isSquadLeader?: boolean;
}
```

---

#### `Mark`

Represents a single weekly mark entry for a member. These objects are stored in an array within each `Boy` object.

```typescript
interface Mark {
  /** The date of the meeting in 'YYYY-MM-DD' format. */
  date: string; 
  /** The total score for the night. A score of -1 indicates absence. */
  score: number;
  /** (Junior Section only) The score for uniform inspection. */
  uniformScore?: number;
  /** (Junior Section only) The score for behaviour. */
  behaviourScore?: number;
}
```

---

#### `AuditLog`

Represents a single entry in the audit log, tracking a change made in the application.

```typescript
interface AuditLog {
  /** A unique identifier for the log entry. */
  id?: string;
  /** The timestamp of when the action occurred (Unix milliseconds). */
  timestamp: number;
  /** The email of the user who performed the action. */
  userEmail: string;
  /** The type of action performed. */
  actionType: AuditLogActionType;
  /** A human-readable description of the action. */
  description: string;
  /** Data needed to revert the action (e.g., the state of an object before a change). */
  revertData: any;
  /** A flag indicating if this action has been reverted. */
  reverted?: boolean;
}
```

---

#### `SectionSettings`

Represents the settings specific to a section (Company or Junior).

```typescript
interface SectionSettings {
  /** The day of the week the section meets (0 = Sunday, 1 = Monday, ..., 6 = Saturday). */
  meetingDay: number;
}
```

---

### Enumerated & Union Types

These types constrain values to a specific set of options.

#### `Section`

Represents the two main sections of the Boys' Brigade. This type is used throughout the app to differentiate data and behavior.

```typescript
type Section = 'company' | 'junior';
```

---

#### Section-Specific Types

These types define the valid squad numbers and school years for each section.

```typescript
// Company Section
type Squad = 1 | 2 | 3;
type SchoolYear = 8 | 9 | 10 | 11 | 12 | 13 | 14;

// Junior Section
type JuniorSquad = 1 | 2 | 3 | 4;
type JuniorYear = 'P4' | 'P5' | 'P6' | 'P7';
```

---

#### `AuditLogActionType`

Defines the types of actions that can be recorded in the audit log.

```typescript
type AuditLogActionType = 
  | 'CREATE_BOY' 
  | 'UPDATE_BOY' 
  | 'DELETE_BOY' 
  | 'REVERT_ACTION' 
  | 'UPDATE_SETTINGS';
```

---

### View & Navigation Types

These types are used by the root `App.tsx` component to manage the current page being displayed.

#### `Page`

Represents the main pages available in the application's navigation.

```typescript
type Page = 'home' | 'weeklyMarks' | 'dashboard' | 'auditLog' | 'settings' | 'help';
```

---

#### `BoyMarksPageView`

A specific view type for displaying an individual boy's marks page. It includes the `boyId` to fetch the correct data.

```typescript
interface BoyMarksPageView {
  page: 'boyMarks';
  boyId: string;
}
```

---

#### `View`

A union type representing the current view of the application.

```typescript
type View = { page: Page } | BoyMarksPageView;
```
