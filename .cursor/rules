# BB‑Manager – Cursor Rules

## Tech Stack and Architecture
- **Framework:** React 18 (with hooks) using TypeScript.
- **Build Tool:** Vite for development and production builds.
- **Styling:** Tailwind CSS for utility‑first styling; avoid inline styles.
- **Backend:** Firebase Firestore used for data persistence and authentication. Use Firestore rules defined in `firestore.rules`.
- **PWA:** Configured via `manifest.json` for offline support; Capacitor used to wrap the app for Android/iOS.
- **Components:** All UI pieces live under `components/`; functional components only, no class components.
- **Hooks:** Custom hooks are in `hooks/`; prefer using these for shared logic (e.g., Firestore access, authentication state).

## Permissions Model
- Three roles: **Admin**, **Captain**, **Officer**.
- Permission checks must use the existing type definitions in `types.ts` (inside `src/`) and the Firebase rules; do not invent new roles.
- Only Admins can create/edit squads or adjust weekly marks; Captains can view squads and record attendance; Officers can view but not edit sensitive data.

## Naming Conventions
- Use **camelCase** for file names and variables (e.g., `squadManager.tsx`).
- Components should be suffixed with `Page` when they represent a route (e.g., `DashboardPage.tsx`) and `Card` or `Modal` for UI widgets.
- Custom hooks should start with `use`, such as `useAuth` or `useSquadData`.
- Firestore collections: `users`, `squads`, `marks`; document IDs should be UUIDs.

## File Structure Overview
- `/android` and `/ios`: Capacitor platforms; avoid editing auto‑generated files here.
- `/components`: reusable UI components.
- `/docs`: project documentation; keep in sync with the codebase when adding features.
- `/services`: abstraction for backend interactions (e.g., Firestore, authentication).
- `/src`: app entry (`App.tsx`), routing, and high‑level pages.
- Root files like `capacitor.config.ts`, `firestore.rules`, `manifest.json`, and `Dockerfile` should remain untouched unless configuration changes are deliberate.

## Non‑negotiable Patterns
- **Type safety is mandatory**: never bypass TypeScript’s type system with `any` unless absolutely necessary.
- **State management**: use React’s Context API defined in `src/contexts/`; do not introduce Redux or other global state libraries.
- **Offline‑first**: ensure all Firestore reads/writes are wrapped with offline caching logic present in existing hooks.
- **Accessibility**: all interactive elements must have aria labels and be keyboard navigable.

## AI Interaction Notes
- Cursor should not refactor or rename existing roles, collections, or types defined in `AI_RULES.md` and `types.ts`.
- When generating new components or services, follow the patterns and folder structure above.

## AI Rules (integrated from AI_RULES.md)

# AI Rules for BB Manager Application

This document outlines the core technologies and specific library usage guidelines for the BB Manager application. Adhering to these rules ensures consistency, maintainability, and leverages the strengths of the chosen tech stack.

### Tech Stack Overview

The BB Manager is a Progressive Web App (PWA) built with a strong emphasis on offline functionality and a responsive user experience.

* **Frontend Framework**: React (using TypeScript for type safety).
* **Styling**: Tailwind CSS (integrated via CDN for a utility-first approach).
* **Backend & Database**: Firebase (Firestore for the primary database and Firebase Authentication for user management).
* **Offline Capabilities**: Service Workers for app shell caching and IndexedDB for robust local data storage.
* **Data Abstraction Layer**: A custom `services/db.ts` module that unifies interactions with both Firestore and IndexedDB.
* **Build Tool**: Vite (used for development and bundling).
* **Package Management**: npm.
* **Icons**: Custom SVG icons (defined in `components/Icons.tsx`).
* **Routing**: Currently uses a custom state-based routing system.
* **Hosting**: Designed for static hosting, with Firebase Hosting being the recommended deployment platform.

### Library Usage Rules

To maintain a consistent and efficient codebase, please adhere to the following guidelines when developing or modifying the application:

* **UI Components**:
  * All user interface elements must be built using **React** and styled exclusively with **Tailwind CSS** classes.
  * For new UI components, prioritize using existing custom components or creating new ones following the project's established style.
  * **Important**: For future component development, leverage the **shadcn/ui** library components where applicable, as they are pre-installed and align with the project's design principles.
* **Icons**:
  * Use the custom SVG icons provided in `components/Icons.tsx`. If a required icon is not available, add it to this file. The `lucide-react` package is available for additional icons if needed.
* **State Management**:
  * Utilize **React's built-in hooks** (`useState`, `useEffect`, `useCallback`, `useMemo`) for managing both component-level and global application state.
* **Data Persistence & API Calls**:
  * All interactions with the database (Firestore and IndexedDB) **must** be routed through the abstraction layer in `services/db.ts`. Do not directly call Firebase SDK or IndexedDB API methods from UI components.
* **Authentication**:
  * **Firebase Authentication** (`firebase/auth`) is the sole authentication provider. All authentication logic should be handled via `services/firebase.ts`.
* **Routing**:
  * The application currently employs a custom state-based routing system managed within `App.tsx`. For any future extensions or refactoring of routing, **React Router** should be used as per project guidelines, with routes defined in `App.tsx`.
* **Notifications**:
  * For all user feedback and notifications, use the existing `Toast` component and the `showToast` function provided by `App.tsx`.
* **Modals**:
  * Use the generic `Modal.tsx` component for all dialogs and pop-ups to ensure a consistent user experience.
