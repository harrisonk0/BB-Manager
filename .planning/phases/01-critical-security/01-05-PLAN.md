---
phase: 01-critical-security
plan: 05
type: execute
wave: 1
depends_on: []
files_modified: []
autonomous: false
user_setup:
  - service: supabase
    why: "Enable leaked password protection in Supabase Auth settings"
    env_vars: []
    dashboard_config:
      - task: "Enable leaked password protection"
        location: "Supabase Dashboard -> Authentication -> Settings -> Password Security"
must_haves:
  truths:
    - "Leaked password protection is enabled in Supabase Dashboard"
    - "Configuration is documented in summary file"
    - "Users cannot set passwords that appear in HaveIBeenPwned database"
  artifacts:
    - path: ".planning/phases/01-critical-security/01-05-SUMMARY.md"
      provides: "Documentation of leaked password protection configuration"
      contains: "Enabled date and configuration location"
  key_links:
    - from: "Supabase Dashboard"
      to: "HaveIBeenPwned.org API"
      via: "Leaked password protection toggle"
      pattern: "Authentication -> Settings -> Password Security"
---

<objective>
Enable leaked password protection in Supabase Auth

Purpose: Leaked password protection uses the HaveIBeenPwned.org API to prevent users from setting passwords that have been exposed in data breaches. This is a manual dashboard configuration step that cannot be automated via migration. Enabling this feature significantly improves account security.

Output: Leaked password protection enabled in Supabase Auth settings
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

@.planning/phases/01-critical-security/01-RESEARCH.md
@.planning/phases/01-critical-security/01-CONTEXT.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>This plan requires manual configuration in Supabase Dashboard (not automatable via migration or CLI)</what-built>
  <how-to-verify>
    1. Log in to Supabase Dashboard (https://supabase.com/dashboard)
    2. Select your project
    3. Navigate to Authentication -> Settings
    4. Find the "Password Security" section
    5. Verify "Leaked password protection" is enabled
    6. Optionally test by attempting to create a user with a known leaked password (e.g., "password123")

    Expected state: "Leaked password protection" toggle is ON. When enabled, Supabase checks passwords against HaveIBeenPwned.org API during user signup and password changes.
  </how-to-verify>
  <resume-signal>Type "enabled" after confirming leaked password protection is enabled, or describe issues encountered</resume-signal>
</task>

<task type="auto">
  <name>Document leaked password protection configuration</name>
  <files>.planning/phases/01-critical-security/01-05-SUMMARY.md</files>
  <action>
    Create a summary document containing:
    1. Statement that leaked password protection is enabled in Supabase Auth
    2. Configuration location (Dashboard -> Authentication -> Settings -> Password Security)
    3. Date enabled
    4. Any notes about the configuration (e.g., custom breach threshold if applicable)

    This document serves as evidence that requirement SEC-05 is satisfied and provides a reference for future maintenance.

    Why: Dashboard-only configurations cannot be verified via code or migrations. Documentation provides an audit trail and ensures the configuration is not forgotten during future maintenance or onboarding.
  </action>
  <verify>ls -la /Users/harrisonk/dev/BB-Manager/.planning/phases/01-critical-security/01-05-SUMMARY.md</verify>
  <done>Summary document exists with leaked password protection confirmation</done>
</task>

</tasks>

<verification>
1. Human confirms leaked password protection is enabled in Supabase Dashboard
2. Summary document exists documenting the configuration
</verification>

<success_criteria>
1. Leaked password protection toggle is ON in Supabase Dashboard
2. Configuration is documented in summary file
3. Users cannot set passwords that appear in HaveIBeenPwned database
</success_criteria>

<output>
After completion, create `.planning/phases/01-critical-security/01-05-SUMMARY.md`
</output>
